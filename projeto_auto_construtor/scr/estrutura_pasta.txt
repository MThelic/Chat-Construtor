Estrutura da Pasta:
projeto_auto_construtor/
    constantes.py
    estilo.py
    main.py
    .streamlit/
        config.toml
    assets/
        .gitkeep.txt
        logo_dark.png
        logo_icone_rgb.ico
        logo_light.png
    base/
        .gitkeep.txt
        imagens/
    pages/
        .gitkeep.txt
        estrutura.py
        sobre.py
    scr/
        constantes.py
        estilo.py
        estilos.css
        estrutura_pasta.txt
        gemini.py
        instrucoes_gemini.txt
        ler_pastas.py
        modificar_arquivos.py
        __pycache__/
            constantes.cpython-312.pyc
            estilo.cpython-312.pyc
            gemini.cpython-312.pyc
            ler_pastas.cpython-312.pyc
            modificar_arquivos.cpython-312.pyc



Nome do Arquivo:constantes.py
C√≥digo:PAGINAS={'main.py': ['Site Auto Gerador', 'üíª'], 'pages/dobro.py': ['Valor Dobrado', 'üî¢']}




Nome do Arquivo:estilo.py
C√≥digo:import streamlit as st
from streamlit.errors import StreamlitAPIException
from PIL import Image
from pathlib import Path
import base64
import scr.constantes

def importar_assets():
    def abrir_imagem(path):
        return Image.open(Path(path))
    def abrir_imagem_base64(path):
        return base64.b64encode(Path(path).read_bytes()).decode()

    assets={
        'logo_ico': abrir_imagem('assets/logo_icone_rgb.ico'),
        'logo_dark': abrir_imagem('assets/logo_dark.png'),
        'logo_light': abrir_imagem('assets/logo_light.png'),
        'logo_dark_base64':abrir_imagem_base64('assets/logo_dark.png')
    }
    return assets

def importar_estilos():
    with open(r"scr/estilos.css", "r") as f:
        css = f.read()
    return css

def aplicar_estilos(*classes, texto="", imagem=None, link=None, link_pagina=None):
    css = importar_estilos()
    classes_str = " ".join(classes)
    if imagem != None:
        elemento = f"<img src=data:image/png;base64,{imagem}>"
    else:
        elemento = texto
    div = f"""<div class="{classes_str}">{elemento}</div>"""
    if link != None:
        div = f"<a href='{link}'>{div}</a>"
    elif link_pagina != None:
        div = f"<a href='{link_pagina}' target='_self'>{div}</a>"

    return f"""<style>{css}</style>{div}"""

def menu_lateral(pagina="Site Auto Gerador"):
    if pagina != "Site Auto Gerador" and "Bug Iniciar" not in st.session_state:
        st.session_state["Bug Iniciar"] = True
        st.rerun()
    assets = importar_assets()
    try:
        st.set_page_config(
            page_title="Auto Construtor", page_icon=assets["logo_ico"], layout="wide"
        )
    except StreamlitAPIException:
        pass
    with st.sidebar:
        st.markdown(
            aplicar_estilos(
                "imagens", link_pagina="", imagem=assets["logo_dark_base64"]
            ),
            unsafe_allow_html=True,
        )
        st.divider()
        st.subheader("CHAT EM CONSTRU√á√ÉO")
        for pag, value in scr.constantes.PAGINAS.items():
            st.page_link(pag, label=value[0], icon=value[1])




Nome do Arquivo:main.py
C√≥digo:import streamlit as st
import scr.gemini
import scr.estilo

scr.estilo.menu_lateral()
st.markdown('## :rainbow[CHAT CONSTRUTOR]')

if "messages" not in st.session_state:
    st.session_state.messages = []

user_input = st.chat_input("Digite seu texto:")

if user_input:
    st.session_state.messages.append({"role": "user", "content": user_input})
    response = scr.gemini.call_google_gemini_api('LEMBRE-SE DE TODAS AS INSTRU√á√ïES!! '+user_input)
    st.session_state.messages.append({"role": "assistant", "content": response})

for message in st.session_state.messages:
    st.chat_message(message["role"]).markdown(message["content"])

if not user_input and not st.session_state.messages:
    st.chat_message("assistant").markdown("Insira alguma instru√ß√£o ou pergunte por sugest√µes")




Nome do Arquivo:estrutura.py
C√≥digo:import streamlit as st
import scr.estilo
import os

scr.estilo.menu_lateral(pagina="Estrutura do Projeto")
st.title("Estrutura do Projeto")

def gerar_estrutura_diagrama(pasta_raiz):
    """Gera um diagrama da estrutura de pastas e arquivos."""
    estrutura = []
    for root, dirs, files in os.walk(pasta_raiz):
        level = root.replace(pasta_raiz, '').count(os.sep)
        indent = '  ' * level
        estrutura.append(f"{indent}{os.path.basename(root)}/")
        for file in files:
            estrutura.append(f"{indent}  - {file}")
    return estrutura

# Obt√©m a estrutura do projeto
pasta_raiz = os.getcwd()
estrutura_diagrama = gerar_estrutura_diagrama(pasta_raiz)

# Exibe a estrutura
st.markdown("```\n" + "\n".join(estrutura_diagrama) + "\n```")



Nome do Arquivo:sobre.py
C√≥digo:import streamlit as st
import scr.estilo

scr.estilo.menu_lateral(pagina="Sobre o Chat Construtor")

st.title("Sobre o Chat Construtor")

st.markdown("""
    O Chat Construtor √© uma ferramenta poderosa para desenvolvedores de aplica√ß√µes Streamlit. 
    Ele permite que voc√™ crie, modifique e gerencie seu projeto de forma r√°pida e eficiente, 
    usando a intelig√™ncia artificial para gerar c√≥digo automaticamente.

    ## Como funciona?

    O Chat Construtor usa o modelo de linguagem **Gemini** para entender suas instru√ß√µes e gerar o c√≥digo Streamlit desejado. 
    Basta digitar seus requisitos e o Chat Construtor far√° o resto! 

    ## Recursos:

    * **Gera√ß√£o de C√≥digo Autom√°tica:** Crie p√°ginas, componentes e funcionalidades com facilidade.
    * **Integra√ß√£o com o Gemini:** Acesse a intelig√™ncia artificial avan√ßada do Gemini para obter resultados precisos.
    * **Gerenciamento de Arquivos:** Organize seu projeto com a fun√ß√£o de gerenciamento de arquivos.

    ## Come√ßando:

    1. **Digite suas instru√ß√µes:** Explique o que voc√™ deseja que o Chat Construtor fa√ßa.
    2. **Revise o c√≥digo gerado:** Verifique se o c√≥digo atende √†s suas necessidades.
    3. **Execute o c√≥digo:** Execute o c√≥digo gerado em seu ambiente Streamlit.

    ## Observa√ß√µes:

    * O Chat Construtor ainda est√° em desenvolvimento. 
    * Se voc√™ encontrar algum erro, por favor, relate-o para que possamos melhor√°-lo.
    * O Chat Construtor √© uma ferramenta poderosa, mas n√£o substitui o conhecimento de programa√ß√£o.

    ## Explore e experimente!
""")

st.markdown(f"### :rainbow[Essa p√°gina foi criada automaticamente pelo Chat Construtor! üéâ]")



Nome do Arquivo:constantes.py
C√≥digo:PAGINAS={'main.py': ['Chat Construtor', 'üíª'], 'pages/estrutura.py': ['Estrutura do Projeto', 'üóÑÔ∏è'], 'pages/sobre.py': ['Sobre o Chat Construtor', 'ü§ñ']}



Nome do Arquivo:estilo.py
C√≥digo:import streamlit as st
from streamlit.errors import StreamlitAPIException
from PIL import Image
from pathlib import Path
import base64
import scr.constantes

def importar_assets():
    def abrir_imagem(path):
        return Image.open(Path(path))
    def abrir_imagem_base64(path):
        return base64.b64encode(Path(path).read_bytes()).decode()

    assets={
        'logo_ico': abrir_imagem('assets/logo_icone_rgb.ico'),
        'logo_dark': abrir_imagem('assets/logo_dark.png'),
        'logo_light': abrir_imagem('assets/logo_light.png'),
        'logo_dark_base64':abrir_imagem_base64('assets/logo_dark.png')
    }
    return assets

def importar_estilos():
    with open(r"scr/estilos.css", "r") as f:
        css = f.read()
    return css

def aplicar_estilos(*classes, texto="", imagem=None, link=None, link_pagina=None):
    css = importar_estilos()
    classes_str = " ".join(classes)
    if imagem != None:
        elemento = f"<img src=data:image/png;base64,{imagem}>"
    else:
        elemento = texto
    div = f"""<div class="{classes_str}">{elemento}</div>"""
    if link != None:
        div = f"<a href='{link}'>{div}</a>"
    elif link_pagina != None:
        div = f"<a href='{link_pagina}' target='_self'>{div}</a>"

    return f"""<style>{css}</style>{div}"""

def menu_lateral(pagina="Chat Construtor"):
    if pagina != "Chat Construtor" and "Bug Iniciar" not in st.session_state:
        st.session_state["Bug Iniciar"] = True
        st.rerun()
    assets = importar_assets()
    try:
        st.set_page_config(
            page_title="Chat Construtor", page_icon=assets["logo_ico"], layout="wide"
        )
    except StreamlitAPIException:
        pass
    with st.sidebar:
        st.markdown(
            aplicar_estilos(
                "imagens", link_pagina="", imagem=assets["logo_dark_base64"]
            ),
            unsafe_allow_html=True,
        )
        st.divider()
        st.subheader("MENU EM CONSTRU√á√ÉO")
        for pag, value in scr.constantes.PAGINAS.items():
            st.page_link(pag, label=value[0], icon=value[1])



Nome do Arquivo:gemini.py
C√≥digo:import google.generativeai as genai
import scr.ler_pastas
import scr.modificar_arquivos
import os
from google.generativeai.types import HarmCategory, HarmBlockThreshold

genai.configure(api_key="AIzaSyAgG2qM9rDLz00ec5lpysZgVRCz7iZOkLU")

generation_config = { "temperature": 1, "top_p": 0.95, "top_k": 64, "max_output_tokens": 8192, "response_mime_type": "text/plain"}

model = genai.GenerativeModel( model_name="gemini-1.5-flash", generation_config=generation_config,safety_settings={HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT: HarmBlockThreshold.BLOCK_ONLY_HIGH})

instrucoes = open(r'scr/instrucoes_gemini.txt', 'r', encoding='utf-8').read()
codigo_atual=scr.ler_pastas.read_folder_structure_and_files()

chat_session = model.start_chat( history=[ { "role": "user", "parts": [instrucoes + codigo_atual]}])

def call_google_gemini_api(text):
    response = chat_session.send_message(text)
    response_text = response.text
    
    return scr.modificar_arquivos.ler_resposta(response_text)



Nome do Arquivo:ler_pastas.py
C√≥digo:import os

def read_folder_structure_and_files():
    folder_path = os.getcwd()
    print(folder_path)
    folder_structure = []
    python_files = []

    # Coletando a estrutura das pastas e arquivos Python
    for root, dirs, files in os.walk(folder_path):
        level = root.replace(folder_path, '').count(os.sep)
        indent = ' ' * 4 * level
        folder_structure.append(f"{indent}{os.path.basename(root)}/")
        subindent = ' ' * 4 * (level + 1)
        for file in files:
            folder_structure.append(f"{subindent}{file}")
            if file.endswith('.py'):
                file_path = os.path.join(root, file)
                python_files.append(file_path)

    # Construindo o conte√∫do a ser retornado
    output_content = "Estrutura da Pasta:\n"
    output_content += "\n".join(folder_structure)
    output_content += "\n\n"

    for file_path in python_files:
        with open(file_path, 'r', encoding='utf-8') as py_file:
            file_content = py_file.read()
            output_content += "\n\n"
            output_content += f"Nome do Arquivo:{os.path.basename(file_path)}\n"
            output_content += f"C√≥digo:{file_content}\n\n"
    open(r'scr/estrutura_pasta.txt', 'w', encoding='utf-8').write(output_content)

    return output_content




Nome do Arquivo:modificar_arquivos.py
C√≥digo:import os
import shutil
import scr.constantes

menu_lateral="import scr.estilo\nscr.estilo.menu_lateral()\n"

def add_pagina(configuracao):
    pag=scr.constantes.PAGINAS
    pag[configuracao[0]]=[configuracao[1],configuracao[2]]
    open(r"scr/constantes.py", "w", encoding='utf-8').write("PAGINAS="+str(pag))

def remover_pagina(value):
    pag=scr.constantes.PAGINAS
    pag.pop(value)
    open(r"scr/constantes.py", "w", encoding='utf-8').write("PAGINAS="+str(pag))

def executar_comando(key,value):
    if key=='chat':
        return f'Resposta: {value}'
    elif key=='criar':
        value=value.strip()
        os.makedirs(value, exist_ok=True)
        return f'Pasta {value} criada'
    elif key=='deletar':
        value=value.strip()
        caminho=os.path.abspath(value)
        if os.path.isfile(caminho):
            os.remove(caminho)
            if 'pages' in value: remover_pagina(value)
        elif os.path.isdir(caminho): shutil.rmtree(caminho)
        else: return f'O caminho {value} n√£o existe.'
        return f'Pasta {value} exclu√≠da'
    elif ',' in key:
        configuracao=key.split(',')
        add_pagina(configuracao)
        conteudo=menu_lateral+value if not('scr.estilo.menu_lateral(' in value) else value
        open(f"{configuracao[0]}", "w", encoding='utf-8').write(conteudo)
        return f'P√°gina {configuracao[2]} {configuracao[1]}'
    else:
        open(f"{key}", "w", encoding='utf-8').write(value)
        return f'Arquivo {key} criado'

def ler_resposta(response_text):
    mensagens=[]
    lista=response_text.split('$')
    dicionario = {item: lista[i + 1].strip('|') for i, item in enumerate(lista) if item and item[0] != '|'}
    for key in dicionario:
        mensagens.append(executar_comando(key,dicionario[key]))
    return "\n".join(mensagens)


